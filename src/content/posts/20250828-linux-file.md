---
title: '리눅스 커널 - 파일시스템(VFS)'
published: '2025-08-27T09:35:43.240Z'
tags: ['linux-kernel', 'VFS', 'file-system']
series: 'linux-kernel'
---

# 리눅스 커널 - 파일시스템(VFS)

### 오늘의 목차

1. **mount된 파일시스템 확인**
   - `mount` 명령으로 지금 내 컴퓨터에 연결된 파일시스템 목록을 볼 수 있음.
   - 예: 리눅스 루트 `/`, USB 메모리, `/proc`, `/sys` 같은 가상 파일시스템.
   - “내 컴퓨터에 어떤 저장공간(또는 가상 파일시스템)이 붙어 있는지” 확인하는 것.
2. **디스크 사용량 / 타입 확인**
   - `df -hT` 명령으로 각 파일시스템이 얼마나 차 있는지, 어떤 종류(ext4, tmpfs 등)인지 알 수 있음.
   - 윈도우의 **내 PC → 드라이브 속성** 같은 걸 터미널에서 보는 느낌.
   - `h`는 사람이 읽기 좋은 단위(GB/MB), `T`는 파일시스템 종류 보여줌.
3. **/proc, /sys 살펴보기**
   - `/proc` : 커널이 프로세스와 시스템 상태를 “파일처럼” 보여주는 가상 폴더.
     - 예: `/proc/cpuinfo`, `/proc/meminfo` → CPU, 메모리 정보 확인.
   - `/sys` : 장치(디바이스)와 드라이버 정보를 “파일처럼” 보여주는 가상 폴더.
     - 예: `/sys/class/net/` → 네트워크 장치 목록.

---

## 1. mount된 파일 시스템 확인

```bash

mount | head -10
```

→ 루트(/), /proc, /sys, /tmp 같은 것들 출력됨

`mount | head -10` 같은 명령어를 쓰는 상황

- **시스템 상태 빠른 확인**
  전체 파일시스템이 너무 많으니, 상위 10개만 보고 “아 지금 루트(/)가 어디 마운트돼 있나?”, “중요 파티션 정상적으로 붙어있나?” 같은 걸 신속하게 확인할 때.
- **디버깅/장애 분석 초입 단계**
  부팅 문제, 루트 파티션 손상, NFS 같은 네트워크 마운트가 안 붙을 때 → `mount` 결과를 바로 확인해서 커널이 파일시스템을 어떻게 인식하고 있는지 체크.
- **스크립트/로그 분석용**
  자동화된 로그 수집에서 너무 길면 의미 없으니 `head` 붙여서 핵심만 저장.

즉, 파일시스템 연결 상태를 빠르게 맛보기 확인하는 용도

## 2. df -hT 실행

```bash
df -hT
```

###

## 📊 Ubuntu 디스크 사용량 확인 (`df -hT`)

| 위치 (Mount Point)                   | 파일시스템 타입     | 전체 크기 | 사용 | 남은 공간 | 사용률 |
| ------------------------------------ | ------------------- | --------- | ---- | --------- | ------ |
| `/` (루트, 시스템 전체)              | ext4                | 57G       | 22G  | 33G       | 39%    |
| `/boot` (부팅 커널 저장소)           | ext4                | 2.0G      | 253M | 1.6G      | 14%    |
| `/boot/efi` (UEFI 부팅 영역)         | vfat (FAT32)        | 1.1G      | 6.1M | 1.1G      | 1%     |
| `/run` (실행 중 임시 영역)           | tmpfs (메모리 기반) | 783M      | 2.2M | 781M      | 1%     |
| `/dev/shm` (프로세스 간 공유 메모리) | tmpfs               | 3.9G      | 0    | 3.9G      | 0%     |
| `/run/lock` (락파일 저장)            | tmpfs               | 5.0M      | 0    | 5.0M      | 0%     |
| `/run/user/1000` (사용자 임시 파일)  | tmpfs               | 783M      | 4.0K | 783M      | 1%     |

---

### 해석

- **루트(`/`)** → 시스템 대부분이 설치되는 메인 공간 (57GB 중 39% 사용).
- **/boot, /boot/efi** → 부팅에 필요한 영역 (커널, EFI 설정).
- **tmpfs** → **램(RAM)을 디스크처럼 쓰는 가상 파일시스템** (속도 빠르지만 재부팅 시 사라짐).

---

## 3. /proc, /sys 살펴보기

```bash
ls /proc | head -20
```

- 숫자들이 나온다.
- 숫자 디렉토리 = 실행 중인 프로세스 ID (PID)
  - 각 프로세스마다 /proc/<PID> 안에 자기 정보가 있음 (상태, 메모리, 실행파일 경로 등)
- 출력에는 안 보였지만 cpu/mem/uptime 정보가 있다고 함

핵심: `/proc`은 **디스크에 저장된 게 아니라 커널이 만들어주는 가상 파일시스템**. 실행 중인 프로세스, 하드웨어 상태를 파일처럼 접근할 수 있게 함.

```bash
ls /sys | head -20
```

장치/드라이버와 커널 내부 구조를 노출하는 인터페이스

### 해석

- `/proc` → “현재 돌아가는 프로그램/커널 상태를 **파일처럼 보여주는 창구**”
- `/sys` → “하드웨어 장치·드라이버 상태를 **파일처럼 보여주는 창구**”
- 둘 다 **진짜 디스크 파일이 아님**, 리눅스 커널이 실시간으로 만들어주는 **가상 파일시스템**.

---

## 오늘의 정리

### `mount`

- 지금 컴퓨터에 **어떤 파일시스템이 어디에 연결(Mount)돼 있는지** 확인

---

### `df -hT`

- 각 파일시스템의 **용량 / 사용량 / 타입** 확인

---

### `ls /proc`, `ls /sys`

- **`/proc`**
  - 숫자 디렉토리 = 실행 중인 **프로세스 ID**
  - `cpuinfo`, `meminfo` 등 → **시스템 상태 파일**
- **`/sys`**
  - `block`, `bus`, `class` 등 → **하드웨어/드라이버 상태**
- 둘 다 **진짜 디스크 파일이 아님** → 커널이 RAM에서 만들어주는 **가상 파일시스템**

---

요약

- `mount` = 어떤 FS들이 붙어 있나?
- `df -hT` = 그 FS들 용량은 얼마나 쓰이고 있나?
- `ls /proc`, `ls /sys` = 커널이 만든 가상 FS → 프로세스 & 하드웨어 상태 보기

오늘 공부한 내용은 파일 시스템 명령어 3가지다.

`ext4`와 같은 복잡한 파일 시스템 내부 구조를 다루기 전에, 먼저 기본기를 다진다는 마음으로 공부 기록을 남겨본다.
