---
import type { GetStaticPaths } from 'astro'
import Layout from '~/layouts/Layout.astro'
import { getSortedPosts } from '~/utils'
import PageHeader from '~/components/PageHeader.astro'
import InfinitePosts from '~/components/InfinitePosts.astro'

// Switch to a single page with client-side infinite scroll
export const getStaticPaths = (async () => {
  const sortedPosts = await getSortedPosts()
  return [
    {
      params: { page: [] },
      props: { posts: sortedPosts.reverse() },
    },
  ]
}) satisfies GetStaticPaths

const { posts } = Astro.props
const pageTitle = '전체 글'
---

<Layout title={pageTitle} description="전체 글 목록">
  <div class="mt-2 sm:mt-0">
    <PageHeader />
    <InfinitePosts posts={posts} initialCount={12} step={12} />
  </div>
</Layout>
